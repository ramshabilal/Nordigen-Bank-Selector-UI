
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Nordigen Bank Selector UI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link href="./node_modules/nordigen-bank-ui/package/src/selector.min.css" rel="stylesheet" /> -->
    <!--Local-->
    <link href="selector.css" rel="stylesheet" />
</head>
<body>
    <div id="institution-content-wrapper"></div>
</body>

<!-- <script src="./node_modules/nordigen-bank-ui/package/src/selector.min.js"></script> -->
<!--Local-->
<script src="selector.min.js"></script>
<script>
        // Get institutions list from ob.nordigen.com/api/v2/institutions/?country=GB
        const institutionList = [
            {
                "id": "ABNAMRO_ABNAGB2LXXX",
                "name": "ABN AMRO Bank Commercial",
                "bic": "ABNAGB2LXXX",
                "transaction_total_days": "540",
                "countries": [
                    "GB"
                ],
                "logo": "https://cdn.nordigen.com/ais/ABNAMRO_FTSBDEFAXXX.png"
            },
            {
                "id": "BBVAUK_BBVAGB2L",
                "name": "BBVA",
                "bic": "BBVAGB2L",
                "transaction_total_days": "730",
                "countries": [
                    "GB"
                ],
                "logo": "https://cdn.nordigen.com/ais/BBVABE_BBVABEBB.png"
            },
            {
                "id": "BANK_OF_SCOTLAND_BUSINESS_BOFSGBS1",
                "name": "Bank of Scotland Business",
                "bic": "BOFSGBS1",
                "transaction_total_days": "90",
                "countries": [
                    "GB"
                ],
                "logo": "https://cdn.nordigen.com/ais/BANK_OF_SCOTLAND_BUSINESS_BOFSGBS1.png"
            },
            {
                "id": "BANK_OF_SCOTLAND_COMMERCIAL_BOFSGBS1",
                "name": "Bank of Scotland Commercial",
                "bic": "BOFSGBS1",
                "transaction_total_days": "90",
                "countries": [
                    "GB"
                ],
                "logo": "https://cdn.nordigen.com/ais/BANK_OF_SCOTLAND_BUSINESS_BOFSGBS1.png"
            },
            {
                "id": "BANK_OF_SCOTLAND_BOFSGBS1",
                "name": "Bank of Scotland Personal",
                "bic": "BOFSGBS1",
                "transaction_total_days": "90",
                "countries": [
                    "GB"
                ],
                "logo": "https://cdn.nordigen.com/ais/BANK_OF_SCOTLAND_BUSINESS_BOFSGBS1.png"
            },
            {
                "id": "BARCLAYCARD_COMMERCIAL_BUKBGB22",
                "name": "Barclaycard Commercial Payments",
                "bic": "BUKBGB22",
                "transaction_total_days": "730",
                "countries": [
                    "GB"
                ],
                "logo": "https://cdn.nordigen.com/ais/BARCLAYCARD_COMMERCIAL_BUKBGB22.png"
            },
            {
                "id": "BARCLAYCARD_BUKBGB22",
                "name": "Barclaycard UK",
                "bic": "BUKBGB22",
                "transaction_total_days": "730",
                "countries": [
                    "GB"
                ],
                "logo": "https://cdn.nordigen.com/ais/BARCLAYCARD_COMMERCIAL_BUKBGB22.png"
            },
            {
                "id": "BARCLAYS_BUSINESS_BUKBGB22",
                "name": "Barclays Business",
                "bic": "BUKBGB22",
                "transaction_total_days": "730",
                "countries": [
                    "GB"
                ],
                "logo": "https://cdn.nordigen.com/ais/BARCLAYS_WEALTH_BUKBGB22.png"
            },
            {
                "id": "BARCLAYS_CORPORATE_BUKBGB22",
                "name": "Barclays Corporate",
                "bic": "BUKBGB22",
                "transaction_total_days": "730",
                "countries": [
                    "GB"
                ],
                "logo": "https://cdn.nordigen.com/ais/BARCLAYS_WEALTH_BUKBGB22.png"
            },
            {
                "id": "BARCLAYS_BUKBGB22",
                "name": "Barclays Personal",
                "bic": "BUKBGB22",
                "transaction_total_days": "730",
                "countries": [
                    "GB",
                ],
                "logo": "https://cdn.nordigen.com/ais/BARCLAYS_WEALTH_BUKBGB22.png"
            },
            {
                "id": "ALLGEMEINE_SPARKASSE_OBEROSTERREICH_AG_ASPKAT2LXXX",
                "name": "Allgemeine Sparkasse Oberösterreich Bank AG",
                "bic": "ASPKAT2LXXX",
                "transaction_total_days": "730",
                "countries": [
                    "AT"
                ],
                "logo": "https://cdn.nordigen.com/ais/KARNTNER_SPARKASSE_AG_KSPKAT2KXXX.png"
            },
            {
                "id": "KLARNA_KLRNSESS",
                "name": "Klarna Bank AB",
                "bic": "KLRNSESS",
                "transaction_total_days": "730",
                "countries": [
                    "SE",
                    "FI",
                    "DE",
                    "DK",
                    "AT",
                    "GB",
                    "NL",
                    "NO"
                ],
                "logo": "https://cdn.nordigen.com/ais/KLARNA_KLRNSESS.png"
            },
        ];

        const config = {
            redirectUrl: 'https://www.example.com',
            logoUrl: 'https://cdn.nordigen.com/ais/Nordigen_Logo_Black.svg',
            text: 'Welcome',
            countryFilter: true,
            styles: {
                // Primary
                fontFamily: 'https://fonts.googleapis.com/css2?family=Roboto&display=swap',
                fontSize: '16',
                backgroundColor: '#F2F2F2',
                textColor: '#1B2021',
                headingColor: '#222',
                linkColor: '#3F52E5',
                // Modal
                modalTextColor: '#1B2021',
                modalBackgroundColor: '#fff',
            }
        };

        institutionSelector(institutionList, 'institution-modal-content', config);

    const container = document.querySelector(".institution-container");
    const observer = new MutationObserver((event) => {
        const institutions = Array.from(document.querySelectorAll('.ob-list-institution > a'));
        institutions.forEach((institution) => {
            institution.addEventListener("click", (e) => {
                e.preventDefault();
                const aspspId = e.currentTarget.getAttribute('data-institution');
                // custom redirect
                window.location = `https://ob.nordigen.com/psd2/start/c349f90f-cf53-4efa-acac-49ba4b727489/ABNAMRO_ABNAGB2LXXX`;
            })
            /////////////////////////////////////////////////////////////////////////////////
        })
    });

    const conf = {
        childList: true
    };
    observer.observe(container, conf);

</script>
</html>
